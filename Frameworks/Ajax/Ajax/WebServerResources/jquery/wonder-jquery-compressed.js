var AjaxOptions={defaultOptions:function(a){return jQuery.extend({method:"GET",asynchronous:true,evalScripts:true},a||{})}};var Effect={PAIRS:{slide:{hide:"SlideUp",show:"SlideDown",effect:"slide"},blind:{hide:"BlindUp",show:"BlindDown",effect:"blind"},appear:{hide:"Fade",show:"Appear",effect:"fade"}}};var AjaxUpdateContainer={insertionFunc:function(f,c,e){var b;for(var a in Effect.PAIRS){pair=Effect.PAIRS[a];if(f==a){var d=pair.effect;b=function(h,g){jQuery(h).hide({effect:d,duration:(c||0.5)*1000,complete:function(){jQuery(h).html(g);jQuery(h).show({effect:d,duration:(e||0.5)*1000})}})}}else{if(f==pair.hide){var d=pair.effect;b=function(h,g){jQuery(h).hide({effect:d,duration:(c||0.5)*1000,complete:function(){jQuery(h).html(g);jQuery(h).show()}})}}else{if(f==pair.show){var d=pair.effect;b=function(h,g){jQuery(h).hide();jQuery(h).html(g);jQuery(h).show({effect:d,duration:(e||0.5)*1000})}}}}}return b},register:function(id,options){if(!options){options={}}eval(id+"Update = function() {AjaxUpdateContainer.update(id, options) }")},update:function(b,a){return AUL.update(b,a)}};var AUC=AjaxUpdateContainer;var AjaxUpdateLink={updateFunc:function(d,b,a){var c=function(e){AjaxUpdateLink.update(d,b,a,e)};return c},update:function(e,b,a,d){var c=jQueryId(e);if(c.length==0){alert('There is no element on this page with the id "'+e+'".')}AjaxUpdateLink._update(e,c.attr("updateUrl"),b,a,d)},_update:function(e,d,b,a,c){if(a){d=d.replace(/[^\/]+$/g,a)}d=StringUtils.addQueryParameters(d,c);if(b&&b._r){d=StringUtils.addQueryParameters(d,"_r="+e)}else{d=StringUtils.addQueryParameters(d,"_u="+e)}d=StringUtils.addQueryParameters(d,"__updateTime="+new Date().getTime());new Ajax.Updater(e,d,AjaxOptions.defaultOptions(b))}};var AUL=AjaxUpdateLink;var AjaxSubmitButton={PartialFormSenderIDKey:"_partialSenderID",AjaxSubmitButtonNameKey:"AJAX_SUBMIT_BUTTON_NAME",defaultOptions:function(b){var a=AjaxOptions.defaultOptions(b);a.method="post";return a},generateActionUrl:function(e,d,b,a){var c=d.action;if(b!=null){c=StringUtils.addQueryParameters(c,b)}c=StringUtils.sub(c,"/wo/","/ajax/");if(e!=null){if(a&&a._r){c=StringUtils.addQueryParameters(c,"_r="+e)}else{c=StringUtils.addQueryParameters(c,"_u="+e)}}c=StringUtils.addQueryParameters(c,"__updateTime="+new Date().getTime());return c},processOptions:function(g,c){var b=null;if(c!=null){b=jQuery.extend({},c);var a=b._asbn;if(a!=null){b._asbn=null;var f=b.parameters;if(f===undefined||f==null){jQuery(g).trigger("ajax:submit");var e=b._fs;if(e==null){e=Form.serializeWithoutSubmits}else{b._fs=null}var d=e(g);b.parameters=d+"&"+AjaxSubmitButton.AjaxSubmitButtonNameKey+"="+a}else{b.parameters=f+"&"+AjaxSubmitButton.AjaxSubmitButtonNameKey+"="+a}}}b=AjaxSubmitButton.defaultOptions(b);return b},partial:function(g,b,c){var d=jQueryId(b);var f=d[0].form;var e={};e[d.attr("name")]=d.val();e[AjaxSubmitButton.PartialFormSenderIDKey]=d.attr("name");var a=jQuery.extend({},c);a.parameters=jQuery.param(e);if(g==null){AjaxSubmitButton.request(f,null,a)}else{AjaxSubmitButton.update(g,f,null,a)}},update:function(g,f,e,b){var c=withId(g);if(c==null){alert('There is no element on this page with the id "'+g+'".')}var a=AjaxSubmitButton.generateActionUrl(g,f,e,b);var d=AjaxSubmitButton.processOptions(f,b);new Ajax.Updater(g,a,d)},request:function(e,d,b){var a=AjaxSubmitButton.generateActionUrl(null,e,d,b);var c=AjaxSubmitButton.processOptions(e,b);new Ajax.Request(a,c)},observeField:function(d,c,a,g,b,i){var h=jQueryId(c);if(h.length>0&&(h.is("input")||h.is("select")||h.is("textarea"))){var e;if(g){e=function(j,k){if(!i.onBeforeSubmit||i.onBeforeSubmit(c)){ASB.partial(d,c,i)}}}else{if(d!=null){e=function(j,k){if(!i.onBeforeSubmit||i.onBeforeSubmit(c)){ASB.update(d,withId(c).form,null,i)}}}else{e=function(j,k){if(!i.onBeforeSubmit||i.onBeforeSubmit(c)){ASB.request(withId(c).form,null,i)}}}}if(b){var f=new AjaxObserveDelayer(b,e);e=f.valueChanged.bind(f)}defer(function(){var j=withId(c);if(j){if(a==null){if(j.type.toLowerCase()=="radio"){new Form.Element.RadioButtonObserver(j,e)}else{new Form.Element.EventObserver(j,e)}}else{notImplemented("Element.Observer");new Form.Element.Observer(j,a,e)}}})}}};var ASB=AjaxSubmitButton;var AjaxBusy={spinners:{},requestContainer:function(b){var a;if(b&&b.container&&b.container.success){a=b.container.success}return a},register:function(g,c,a,e,b,d,f){jQuery(document).ajaxSend(function(k,j,i){var h=AjaxBusy.requestContainer(i);if(!a||(h&&h.id==a)){if(d==true){var l=AjaxBusy.spinners[c];if(l==undefined){l=new Spinner(f);AjaxBusy.spinners[c]=l}l.spin(c)}if(g&&h){jQuery(h).addClass(g)}if(c){jQuery(c).fadeIn()}if(e){e(k,j,i)}}});jQuery(document).ajaxStop(function(k,j,i){var h=AjaxBusy.requestContainer(i);if(!a||(h&&h.id==a)){if(g&&h){jQuery(h).removeClass(g)}if(c){jQuery(c).fadeOut()}if(b){b(k,j,i)}if(d==true){var l=AjaxBusy.spinners[c];if(l){AjaxBusy.spinners[c]=undefined;setTimeout(function(){l.stop()},500)}}}})}};var AjaxInPlace={saveFunctionName:function(a){return"window."+a+"Save"},cancelFunctionName:function(a){return"window."+a+"Cancel"},editFunctionName:function(a){return"window."+a+"Edit"},cleanupEdit:function(id){var saveFunctionName=this.saveFunctionName(id);var cancelFunctionName=this.cancelFunctionName(id);if(typeof eval(saveFunctionName)!="undefined"){eval(saveFunctionName+" = null")}if(typeof eval(cancelFunctionName)!="undefined"){eval(cancelFunctionName+" = null")}},cleanupView:function(id){var editFunctionName=this.editFunctionName(id);if(typeof eval(editFunctionName)!="undefined"){eval(editFunctionName+" = null")}}};var AIP=AjaxInPlace;